import React, { Suspense } from 'react';
import { observer } from 'mobx-react';
import { getEnv } from 'mobx-state-tree';
import { readConfObject } from '@jbrowse/core/configuration';
import { LoadingEllipses, createJBrowseTheme } from '@jbrowse/core/ui';
import { EmbeddedViewContainer, ModalWidget } from '@jbrowse/embedded-core';
import { ThemeProvider } from '@mui/material';
const JBrowseLinearGenomeView = observer(function ({ viewState, }) {
    const { session } = viewState;
    const { view } = session;
    const { pluginManager } = getEnv(session);
    const viewType = pluginManager.getViewType(view.type);
    if (!viewType) {
        throw new Error(`unknown view type ${view.type}`);
    }
    const { ReactComponent } = viewType;
    const theme = createJBrowseTheme(readConfObject(viewState.config.configuration, 'theme'));
    return (React.createElement(ThemeProvider, { theme: theme },
        React.createElement(EmbeddedViewContainer, { key: `view-${view.id}`, view: view },
            React.createElement(Suspense, { fallback: React.createElement(LoadingEllipses, null) },
                React.createElement(ReactComponent, { model: view, session: session }))),
        React.createElement(ModalWidget, { session: session })));
});
export default JBrowseLinearGenomeView;
