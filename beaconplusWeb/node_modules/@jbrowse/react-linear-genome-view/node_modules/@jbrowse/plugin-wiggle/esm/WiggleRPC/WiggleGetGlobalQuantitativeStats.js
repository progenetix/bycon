import RpcMethodType from '@jbrowse/core/pluggableElementTypes/RpcMethodType';
import SerializableFilterChain from '@jbrowse/core/pluggableElementTypes/renderers/util/serializableFilterChain';
import { getAdapter } from '@jbrowse/core/data_adapters/dataAdapterCache';
export class WiggleGetGlobalQuantitativeStats extends RpcMethodType {
    constructor() {
        super(...arguments);
        this.name = 'WiggleGetGlobalQuantitativeStats';
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    async deserializeArguments(args, rpcDriverClassName) {
        const l = await super.deserializeArguments(args, rpcDriverClassName);
        return {
            ...l,
            filters: args.filters
                ? new SerializableFilterChain({
                    filters: args.filters,
                })
                : undefined,
        };
    }
    async execute(args, rpcDriverClassName) {
        const pm = this.pluginManager;
        const deserializedArgs = await this.deserializeArguments(args, rpcDriverClassName);
        const { adapterConfig, sessionId } = deserializedArgs;
        const { dataAdapter } = await getAdapter(pm, sessionId, adapterConfig);
        // @ts-expect-error
        return dataAdapter.getGlobalStats(deserializedArgs);
    }
}
