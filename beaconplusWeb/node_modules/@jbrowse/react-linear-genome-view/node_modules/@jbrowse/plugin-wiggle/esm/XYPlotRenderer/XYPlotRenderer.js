import { readConfObject } from '@jbrowse/core/configuration';
import { drawXY } from '../drawXY';
import WiggleBaseRenderer from '../WiggleBaseRenderer';
import { YSCALEBAR_LABEL_OFFSET } from '../util';
export default class XYPlotRenderer extends WiggleBaseRenderer {
    async draw(ctx, props) {
        const { features, config } = props;
        // the adjusted height takes into account YSCALEBAR_LABEL_OFFSET from the
        // wiggle display, and makes the height of the actual drawn area add
        // "padding" to the top and bottom of the display
        const pivotValue = readConfObject(config, 'bicolorPivotValue');
        const negColor = readConfObject(config, 'negColor');
        const posColor = readConfObject(config, 'posColor');
        return drawXY(ctx, {
            ...props,
            colorCallback: readConfObject(config, 'color') === '#f0f'
                ? (_, score) => score < pivotValue ? negColor : posColor
                : (feature, _score) => readConfObject(config, 'color', { feature }),
            offset: YSCALEBAR_LABEL_OFFSET,
            features: [...features.values()],
        });
    }
}
