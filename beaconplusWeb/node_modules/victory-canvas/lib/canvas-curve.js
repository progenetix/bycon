"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CanvasCurve = void 0;

var _react = _interopRequireDefault(require("react"));

var _victoryCore = require("victory-core");

var _useCanvasContext2 = require("./hooks/use-canvas-context");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var CanvasCurve = function (props) {
  var _useCanvasContext = (0, _useCanvasContext2.useCanvasContext)(),
      canvasRef = _useCanvasContext.canvasRef,
      clear = _useCanvasContext.clear,
      clip = _useCanvasContext.clip;

  var style = props.style,
      data = props.data;
  var stroke = style.stroke,
      strokeWidth = style.strokeWidth;

  var draw = _react.default.useCallback(function (ctx) {
    var line = _victoryCore.LineHelpers.getLineFunction(props);

    ctx.strokeStyle = stroke;
    ctx.lineWidth = strokeWidth;
    line.context(ctx)(data);
    ctx.stroke();
  }, [data, props, stroke, strokeWidth]);

  _react.default.useEffect(function () {
    var _canvasRef$current;

    var ctx = (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getContext("2d");
    if (!ctx) return;
    clear(ctx);
    draw(ctx);
    clip(ctx);
  }, [canvasRef, draw, clear, clip]);

  return null;
};

exports.CanvasCurve = CanvasCurve;