description: >-
  Definitions of aggregations for the Bycon aggregator service.
  Each aggregation definition contains an `id`, `label`, `description`, and a
  list of one or more `concepts`, as well as an optional `sorted` property which
  can indicate to the client that the returned `distribution` of the aggregation
  result objects response has some pre-sorted order.
  Each of the `concepts` defines the scope (individual, biosample, analysis),
  property to aggregate on, and optional `termIds` or `splits` for selection
  or binning of the results in the returned `distribution`.
$defs:
  histologicalDiagnoses:
    id: histologicalDiagnoses
    label: Selected Diagnostic Classes (by NCIT)
    description: >-
      Count of histological diagnoses in matched biosamples
    scope: biosample
    concepts:
      - property: biosample.histological_diagnosis.id
        termIds:
          - NCIT:C9335 # Malignant neoplasm of breast
          - NCIT:C4863 # Prostate Carcinoma
          - NCIT:C9384 # Kidney Carcinoma
          - NCIT:C7431 # Malignant Ovarian Neoplasm
          - NCIT:C61574 # Malignant Uterine Corpus Neoplasm
          - NCIT:C9311 # Malignant Cervical Neoplasm
          - NCIT:C3513 # Esophageal Carcinoma
          - NCIT:C35850 # Head and Neck Carcinoma
          - NCIT:C4878 # Lung Carcinoma
          - NCIT:C207229 # Pancreatic Carcinoma
          - NCIT:C4911 # Gastric Carcinoma
          - NCIT:C2955 # Colorectal Carcinoma
          - NCIT:C7927 # Liver Carcinoma
          - NCIT:C4822 # Malignant Glioma
          - NCIT:C3716 # Primitive Neuroectodermal Tumor
          - NCIT:C3224 # Melanoma
          - NCIT:C9118 # Sarcoma
          - NCIT:C4925 # Malignant Germ Cell Tumor
          - NCIT:C27753 # Acute Myeloid Leukemia, Not Otherwise Specified
          - NCIT:C3163 # Chronic Lymphocytic Leukemia
          - NCIT:C3466 # T-Cell Non-Hodgkin Lymphoma
          - NCIT:C3457 # B-Cell Non-Hodgkin Lymphoma
      - property: biosample.individual_info.sex.id

  selectedCarinomaDiagnoses:
    id: selectedCarinomaDiagnoses
    label: Selected Diagnostic Classes (carcinomas; by NCIT)
    description: >-
      Count of histological diagnoses in matched biosamples for selected carcinomas
    scope: biosample
    concepts:
      - property: biosample.histological_diagnosis.id
        termIds:
          - NCIT:C9384 # Kidney Carcinoma
          - NCIT:C3513 # Esophageal Carcinoma
          - NCIT:C35850 # Head and Neck Carcinoma
          - NCIT:C4878 # Lung Carcinoma
          - NCIT:C207229 # Pancreatic Carcinoma
          - NCIT:C4911 # Gastric Carcinoma
          - NCIT:C2955 # Colorectal Carcinoma
          - NCIT:C7927 # Liver Carcinoma

  platformTechnologies:
    id: platformTechnologies
    label: Platform Technologies
    description: >-
      Count of basic platform technologies used in matched analyses
    scope: analysis
    concepts:
      - property: analysis.platform_model.id
        termIds:
          - EFO:0030075 # cDNA microarray
          - EFO:0010938 # large-insert clone DNA microarray
          - EFO:0010939 # oligonucleotide DNA microarray
          - EFO:0010937 # comparative genomic hybridization (CGH)
          - NCIT:C16437 # Chromosome Banding
          - OBI:0002117 # whole genome sequencing assay
          - OBI:0002118 # whole exome sequencing assay
          - NCIT:C158253  # Targeted Genome Sequencing

  allPlatformTechnologies:
    id: platformTechnologies
    label: All Platforms by ID
    description: >-
      Count of basic platform technologies used in matched analyses
    scope: analysis
    concepts:
      - property: analysis.platform_model.id

  sampleOriginDetailsBySex:
    id: sampleOriginDetails
    label: Anatomical Origin
    description: >-
      Count of anatomical sites in matched biosamples
    scope: biosample
    concepts:
      - property: biosample.sample_origin_detail.id
      - property: biosample.individual_info.sex.id

  sampleICDO3histologyByAge:
    id: sampleICDO3histologyByAge
    label: ICD-O 3 Histology by Age at Diagnosis
    description: >-
      ICD-O 3 histologies in matched biosamples by age at diagnosis
    scope: biosample
    concepts:
      - property: biosample.icdo_morphology.id
      - property: biosample.observation_moment.age
        format: iso8601duration
        splits:
          - P0D
          - P18Y
          - P65Y
          - P120Y

  sampleICDO3histologyBySex:
    id: sampleICDO3histologyBySex
    label: ICD-O 3 Histology by Sex
    scope: biosample
    description: 
      - ICD-O 3 histologies by sex in matched biosamples
    concepts:
      - property: biosample.icdo_morphology.id
      - property: biosample.individual_info.sex.id

  diseaseBySex:
    id: diseaseBySex
    label: Sex distributions for Diseases in Individuals
    description: 
      - Cancer type by sex in matched individuals
    scope: individual
    concepts:
      - property: individual.index_disease.disease_code.id
      - property: individual.sex.id

  biosampleDiseaseBySex:
    id: biosampleDiseaseBySex
    label: Sex distributions for Diseases in Biosamples
    description: 
      - Cancer type by sex in matched biosamples
    scope: biosample
    concepts:
      - property: biosample.histological_diagnosis.id
      - property: biosample.individual_info.sex.id

  sampleCountries:
    id: sampleCountries
    label: Sample Countries
    label_key: country
    description: >-
      Count of countries of origin in matched biosamples
    scope: biosample
    concepts:
      - property: biosample.geo_location.properties.ISO3166alpha3

  ageAtDiagnosisBySex:
    id: ageAtDiagnosisBySex
    label: Age at Diagnosis by Sex
    description: >-
      Age at diagnosis by sex
    scope: individual
    sorted: True
    concepts:
      - property: individual.index_disease.onset.age
        format: iso8601duration
        splits:
          - P0D
          - P18M
          - P18Y
          - P40Y
          - P65Y
          - P80Y
          - P120Y
      - property: individual.sex.id

  followupTime:
    id: followupTime
    label: Follow-up Time
    description: >-
      Follow-up time after diagnosis
    scope: individual
    sorted: True
    concepts:
      - property: individual.index_disease.followup
        format: iso8601duration
        splits:
          - P0D
          - P6M
          - P1Y
          - P18M
          - P3Y
          - P5Y
          - P10Y
          - P60Y
