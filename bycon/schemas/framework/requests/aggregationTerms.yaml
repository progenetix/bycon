$schema: https://json-schema.org/draft/2020-12/schema
$id: ___BEACON_ROOT___/services/schemas/aggregationTerms/v2026-02-04
title: Aggregation Terms
description: |-
  Terms used to specify items to return in an aggregation data response. Terms
  are provided through the beacon's `/aggregation_terms` endpoint and the `id`
  values of those terms constitute the possible `id` values here. See also the
  documentation for `AggregationTermInResponse.id` in `beaconAggregationTermsResults`.

  TODO: The current implementation does not allow to define aggregations, _i.e._
  to send aggregation term objects or parts thereof (e.g. `splits`, `termIds`). It
  only allows to select from the predefined concepts. This behaviour might
  be changed in the future, e.g. allowing dynamic aggregation definitions through
  POSTing aggregation term objects.
type: array
items:
  $ref: '#/$defs/AggregationTermInRequest'
examples:
  - - id: selectedDiagnoses
    - id: sexAtBirth
  - - id: biosample.histologicalDiagnosis.id

$defs:
  AggregationTermInRequest:
    description: >-
      An array of `AggregationConceptInRequest` objects representing the concepts
      to be aggregated for a single aggregation, e.g. terms corresponding to
      `sexAtBirth` and `diagnosis`.
    type: array
    items:
      $ref: '#/$defs/AggregationConceptInRequest'

  AggregationConceptInRequest:
    type: object
    properties:
      id:
        type: string
        description: >-
          The `id` of the aggregation concept as provided by the beacon. It is used
          to select the aggregation concept, _i.e._ usually corresponding to a
          property in the data model.
        examples:
          - sexAtBirth
          - biosample.histologicalDiagnosis.id
          - ageAtCollection

    examples:
      - id: selectedDiagnoses
      - id: biosample.histologicalDiagnosis.id
      - id: sexAtBirth
      - id: ageAtDiagnosis
