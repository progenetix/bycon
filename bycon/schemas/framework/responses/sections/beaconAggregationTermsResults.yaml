$schema: https://json-schema.org/draft/2020-12/schema
description: >-
  Aggregation terms and concepts supported for this Beacon.
type: object
properties:
  aggregationTerms:
    type: array
    items:
      $ref: '#/$defs/AggregationTermInResponse'
    examples:
      - id: followupTime
        label: Follow-up Time
        description: Follow-up Time After Diagnosis
        sorted: true
        concepts:
          - property: individual.diseases.followup
            type: string
            format: iso8601duration
            splits:
              - P0D
              - P18M
              - P10Y
              - P60Y
      - id: diseaseBySex
        label: Sex distributions for Diseases in Individuals
        description: Cancer type by sex in matched individuals
        concepts:
          - property: individual.diseases.diseaseCode.id
          - property: individual.sex.id
additionalProperties: true

$defs:
  AggregationTermInResponse:
    type: object
    description: >-
      Information about the aggregation performed using this term.
    required:
      - id
    properties:
      id:
        description: >-
          The aggregation term id.
        type: string
        examples:
          - followupTime
      label:
        description: >-
          A short label which e.g. can be used by clients to label diagrams or
          data tables.
        type: string
        examples:
          - Follow-up Time After Diagnosis
      description:
        description: >-
          A description of the summary concept, e.g. with details about the
          included properties and the operations performed during aggregation.
      sorted:
        description: >-
          Indicates whether the resulting distribution results will be sorted in
          some way.
        type: boolean
      concepts:
        type: array
        items:
          $ref: "./beaconAggregationResults.yaml#/$defs/AggregationConcept"

